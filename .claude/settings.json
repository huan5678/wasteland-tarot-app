{
  "statusLine": {
    "type": "command",
    "command": "input=$(cat); cwd=$(echo \"$input\" | jq -r '.workspace.current_dir'); username=$(whoami); hostname=$(hostname -s); if [[ \"$cwd\" == \"$HOME\"* ]]; then path=\"~${cwd#$HOME}\"; else path=\"$cwd\"; fi; time=$(date +%H:%M:%S); cd \"$cwd\" 2>/dev/null && if git rev-parse --git-dir >/dev/null 2>&1; then branch=$(git symbolic-ref --short HEAD 2>/dev/null || echo 'detached'); upstream=$(git rev-parse --abbrev-ref --symbolic-full-name @{u} 2>/dev/null); if [ -n \"$upstream\" ]; then ahead=$(git rev-list --count HEAD ^\"$upstream\" 2>/dev/null || echo '0'); behind=$(git rev-list --count \"$upstream\" ^HEAD 2>/dev/null || echo '0'); git_info=\" [$branch\"; [ \"$ahead\" -gt 0 ] && git_info=\"$git_info ↑$ahead\"; [ \"$behind\" -gt 0 ] && git_info=\"$git_info ↓$behind\"; git_info=\"$git_info]\"; else git_info=\" [$branch]\"; fi; else git_info=''; fi; tokens_used=$(echo \"$input\" | jq -r '.conversation.tokens_used // 0'); tokens_limit=$(echo \"$input\" | jq -r '.conversation.tokens_limit // 200000'); tokens_pct=$(awk \"BEGIN {printf \\\"%.1f\\\", ($tokens_used/$tokens_limit)*100}\"); context_info=\" [ctx: ${tokens_used}/${tokens_limit} (${tokens_pct}%)]\"; echo \"$username@$hostname $path$git_info$context_info $time\""
  }
}
