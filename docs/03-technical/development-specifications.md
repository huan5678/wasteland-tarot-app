# å»¢åœŸå¡”ç¾…ç³»çµ±é–‹ç™¼è¦æ ¼

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

åŸºæ–¼ Fallout å¾Œæœ«æ—¥ä¸»é¡Œçš„å¡”ç¾…ç‰Œè§£è®€ç³»çµ±ï¼Œæœ¬æ–‡ä»¶å®šç¾©å»¢åœŸå¡”ç¾…æ‡‰ç”¨çš„åŠŸèƒ½éœ€æ±‚å’Œé©—æ”¶æ¨™æº–ã€‚ç³»çµ±èåˆç¶“å…¸å¡”ç¾…æ™ºæ…§èˆ‡ Fallout å®‡å®™çš„å¹½é»˜èˆ‡æ·±åº¦ï¼Œæä¾›æ²‰æµ¸å¼çš„å¾Œæœ«æ—¥å åœé«”é©—ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„

### 1. å»¢åœŸå±…æ°‘ç®¡ç†æ¨¡çµ„ (Wasteland Dweller Management)

#### 1.1 é¿é›£æ‰€å±…æ°‘è¨»å†Š (DWELLER-001)
**åŠŸèƒ½æè¿°**: æ–°çš„å»¢åœŸå±…æ°‘å¯ä»¥å»ºç«‹å¸³è™Ÿä¸¦è¨­å®šå€‹äººæª”æ¡ˆ

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given æ–°å±…æ°‘åœ¨ Vault-Tec è¨»å†Šçµ‚ç«¯
When å±…æ°‘è¼¸å…¥æœ‰æ•ˆçš„è¯çµ¡æ–¹å¼å’Œå¯†ç¢¼
And é¸æ“‡èµ·å§‹ Karma å‚¾å‘ (Good/Neutral/Evil)
And é¸æ“‡åå¥½çš„å»¢åœŸè§’è‰²è²éŸ³
And é¸æ“‡æ‰€å±¬æ´¾ç³»è¦ªå’Œåº¦ (Brotherhood, NCR, Caesar's Legion, Raiders, Vault Dweller)
And ç¢ºèªé¿é›£æ‰€ä½¿ç”¨å”è­°
Then ç³»çµ±å‰µå»ºå±…æ°‘æª”æ¡ˆ
And åˆ†é…åˆå§‹ç¶“é©—å€¼å’Œç­‰ç´š
And è¨­å®šè¼»å°„æŠ—æ€§ç­‰ç´š
And é¡¯ç¤º Pip-Boy é¢¨æ ¼çš„æ­¡è¿è¨Šæ¯ + é–‹æ©ŸéŸ³æ•ˆ
And å±…æ°‘ç‹€æ…‹è¨­ç‚º "Active Wastelander"
And æ’­æ”¾ Vault é–€é–‹å•ŸéŸ³æ•ˆè¡¨ç¤ºæ­¡è¿
```

**åŠŸèƒ½éœ€æ±‚**:
- æ”¯æ´ Karma ç³»çµ±åˆå§‹è¨­å®š (å½±éŸ¿è§£è®€å‚¾å‘)
- è§’è‰²è²éŸ³åå¥½é¸æ“‡ (4ç¨®è§£è®€é¢¨æ ¼)
- æ´¾ç³»å°é½Šç³»çµ± (5å€‹ä¸»è¦æ´¾ç³»)
- Pip-Boy é¢¨æ ¼ä»‹é¢ (ç¶ è‰²å–®è‰²é¡¯ç¤ºå™¨)
- å»¢åœŸä¸»é¡Œé©—è­‰æµç¨‹
- éŸ³æ•ˆç³»çµ±æ•´åˆ (Pip-Boy éŸ³æ•ˆã€Vault é–€éŸ³æ•ˆ)

#### 1.2 å»¢åœŸçµ‚ç«¯å­˜å– (DWELLER-002)
**åŠŸèƒ½æè¿°**: å»¢åœŸå±…æ°‘å¯ä»¥é€éçµ‚ç«¯ä»‹é¢å­˜å–ç³»çµ±

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å±…æ°‘å·²å®Œæˆé¿é›£æ‰€è¨»å†Š
When å±…æ°‘åœ¨çµ‚ç«¯è¼¸å…¥æ­£ç¢ºçš„èªè­‰è³‡è¨Š
And é¸æ“‡é€²å…¥å»¢åœŸå¡”ç¾…ç³»çµ±
Then ç³»çµ±é¡¯ç¤º Pip-Boy é¢¨æ ¼è¼‰å…¥ç•«é¢
And æ’­æ”¾å»¢åœŸä¸»é¡ŒéŸ³æ•ˆ
And å±…æ°‘è¢«å°å‘åˆ°ä¸»è¦æ§åˆ¶å°
And é¡¯ç¤ºç•¶å‰ Karma ç‹€æ…‹å’Œè§’è‰²åå¥½
```

### 2. å»¢åœŸå¡”ç¾…ç³»çµ±æ¨¡çµ„ (Wasteland Tarot System)

#### 2.1 å»¢åœŸå¡ç‰Œè³‡æ–™ç®¡ç† (WASTELAND-001)
**åŠŸèƒ½æè¿°**: ç³»çµ±ç®¡ç†78å¼µå»¢åœŸä¸»é¡Œå¡”ç¾…ç‰Œçš„å®Œæ•´è³‡æ–™

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå¡”ç¾…ç³»çµ±å•Ÿå‹•
When è¼‰å…¥å¡ç‰Œè³‡æ–™åº«
Then ç³»çµ±åŒ…å«å®Œæ•´çš„78å¼µå»¢åœŸä¸»é¡Œå¡ç‰Œ
And åŒ…å«å››å€‹å»¢åœŸèŠ±è‰²ï¼š
  | èŠ±è‰² | åŸå§‹èŠ±è‰² | å…ƒç´  | ä»£è¡¨æ„ç¾© |
  | å¯æ¨‚ç“¶ (Nuka-Cola Bottles) | è–æ¯ (Cups) | æ°´ | æƒ…æ„Ÿã€é—œä¿‚ã€è¼»å°„æ²»ç™‚ã€ç¤¾ç¾¤é€£çµ |
  | æˆ°é¬¥æ­¦å™¨ (Combat Weapons) | å¯¶åŠ (Swords) | é¢¨ | è¡çªã€ç­–ç•¥ã€æ±ºç­–ã€ç”Ÿå­˜æ™ºæ…§ |
  | ç“¶è“‹ (Bottle Caps) | éŒ¢å¹£ (Pentacles) | åœŸ | è³‡æºã€äº¤æ˜“ã€ç”Ÿå­˜ç‰©è³‡ã€å¯¦ç”¨ä¸»ç¾© |
  | è¼»å°„æ£’ (Radiation Rods) | æ¬Šæ– (Wands) | ç« | èƒ½é‡ã€å‰µé€ åŠ›ã€è®Šç•°ã€è¡Œå‹•åŠ› |
And å¤§é˜¿çˆ¾å…‹é‚£22å¼µé‡æ–°è¨­è¨ˆç‚ºå»¢åœŸè§’è‰²ï¼š
  | ç·¨è™Ÿ | åŸå§‹åç¨± | å»¢åœŸåç¨± | æè¿° |
  | 0 | æ„šè€… | æ–°æ‰‹é¿é›£æ‰€å±…æ°‘ (The Vault Newbie) | å‰›èµ°å‡ºé¿é›£æ‰€ï¼Œå°å»¢åœŸå……æ»¿å¤©çœŸå¹»æƒ³ |
  | 1 | é­”è¡“å¸« | ç§‘æŠ€å°ˆå®¶ (The Tech Specialist) | æŒæ¡å…ˆé€²ç§‘æŠ€çš„å»¢åœŸç§‘å­¸å®¶ |
  | 2 | å¥³ç¥­å¸ | ç¥ç§˜é è¨€å®¶ (The Wasteland Oracle) | æ“æœ‰é çŸ¥èƒ½åŠ›çš„ç¥ç§˜å»¢åœŸå±…æ°‘ |
  | 3 | çš‡å | è¾²å ´ä¸»æ¯ (The Farm Matriarch) | åœ¨å»¢åœŸä¸­å»ºç«‹ç¹æ¦®è¾²å ´çš„å¥³æ€§é ˜è¢– |
  | 4 | çš‡å¸ | é¿é›£æ‰€ç›£ç£ (The Overseer) | æŒæ§é¿é›£æ‰€ç§©åºçš„å¨æ¬Šé ˜è¢– |
  | 5 | æ•™å®— | å…„å¼Ÿæœƒé•·è€ (The Brotherhood Elder) | é‹¼éµå…„å¼Ÿæœƒçš„çŸ¥è­˜å®ˆè­·è€… |
And æ¯å¼µç‰ŒåŒ…å«æ­£ä½å’Œé€†ä½çš„å»¢åœŸä¸»é¡Œè§£é‡‹
And æ¯å¼µç‰Œå…·æœ‰80å¹´ä»£åƒç´ è—è¡“é¢¨æ ¼åœ–ç‰‡
And æ¯å¼µç‰ŒåŒ…å« Fallout é»‘è‰²å¹½é»˜å…ƒç´ å’ŒèƒŒæ™¯æ•…äº‹
And å¡ç‰Œå…·æœ‰è¼»å°„ç­‰ç´šå±¬æ€§å½±éŸ¿æŠ½ç‰Œéš¨æ©Ÿæ€§
And å°é˜¿çˆ¾å…‹é‚£56å¼µåŒ…å«å»¢åœŸæ—¥å¸¸ç”Ÿæ´»æƒ…å¢ƒ
And å®®å»·ç‰Œé‡æ–°å‘½åï¼šæ–°å…µ(Page)ã€å»¢åœŸé¨å£«(Knight)ã€èšè½é ˜è¢–(Queen)ã€å»¢åœŸéœ¸ä¸»(King)
```

#### 2.2 å»¢åœŸæ´—ç‰Œæ¼”ç®—æ³• (WASTELAND-002)
**åŠŸèƒ½æè¿°**: å¯¦ç¾èåˆè¼»å°„éš¨æ©Ÿæ€§çš„å»¢åœŸé¢¨æ ¼æŠ½ç‰Œæ©Ÿåˆ¶

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå±…æ°‘é–‹å§‹æ–°çš„å åœ
When å±…æ°‘é¸æ“‡å»¢åœŸç‰Œé™£é¡å‹ï¼š
  | ç‰Œé™£åç¨± | è‹±æ–‡åç¨± | å¡ç‰Œæ•¸é‡ | é©ç”¨æƒ…å¢ƒ |
  | å–®å¼µå»¢åœŸæŒ‡å¼• | Single Wasteland Reading | 1 | ä»Šæ—¥å»¢åœŸé‹å‹¢ã€ç”Ÿå­˜æ±ºç­–æŒ‡å¼• |
  | é¿é›£æ‰€ç§‘æŠ€ä¸‰ç‰Œé™£ | Vault-Tec Spread | 3 | æˆ°å‰-ç•¶å‰-é‡å»ºæ™‚é–“ç·šåˆ†æ |
  | å»¢åœŸç”Ÿå­˜äº”ç‰Œé™£ | Wasteland Survival Spread | 5 | è³‡æºã€å¨è„…ã€ç›Ÿå‹ã€ç­–ç•¥ã€çµæœ |
  | å…„å¼Ÿæœƒè­°æœƒ | Brotherhood Council | 7 | åœ“å½¢è­°æœƒæ¡Œä½ˆå±€ï¼Œå…¨é¢æ±ºç­–éç¨‹ |
And è§¸ç™¼è“‹é©è¨ˆæ•¸å™¨é¢¨æ ¼çš„æ´—ç‰Œå‹•ç•« + è¨ˆæ•¸å™¨éŸ³æ•ˆ
Then ç³»çµ±ä½¿ç”¨æ”¹è‰¯ç‰ˆFisher-Yates + è¼»å°„éš¨æ©Ÿæ€§æ¼”ç®—æ³•
And æ¯å¼µç‰Œçš„è¼»å°„ç­‰ç´šå½±éŸ¿è¢«é¸ä¸­æ©Ÿç‡
And ç‰Œä½æ–¹å‘å—å±…æ°‘ Karma å‚¾å‘å½±éŸ¿ (Goodè¶¨å‘æ­£ä½, Evilè¶¨å‘é€†ä½)
And æ’­æ”¾é¿é›£æ‰€é–€é–‹å•ŸéŸ³æ•ˆ + æ©Ÿæ¢°é‹è½‰è²
And ç¢ºä¿åŒæ¬¡å åœç„¡é‡è¤‡å¡ç‰Œ
And é¡¯ç¤º Pip-Boy é¢¨æ ¼çš„æŠ½ç‰Œé€²åº¦æ¢ + æƒæç·šæ•ˆæœ
And æŠ½ç‰Œéç¨‹æ¨¡æ“¬å»¢åœŸéš¨æ©Ÿé­é‡æ©Ÿåˆ¶
```

### 3. å»¢åœŸè§’è‰²è§£è®€å¼•æ“ (Wasteland Character Interpretation Engine)

#### 3.1 è§’è‰²è²éŸ³é¸æ“‡ç³»çµ± (CHARACTER-001)
**åŠŸèƒ½æè¿°**: å»¢åœŸå±…æ°‘å¯ä»¥é¸æ“‡ä¸åŒè§’è‰²çš„è§£è®€é¢¨æ ¼å’Œè²éŸ³

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå±…æ°‘é€²å…¥è§£è®€è¨­å®š
When å±…æ°‘æŸ¥çœ‹å¯ç”¨è§’è‰²è²éŸ³é¸é …
Then ç³»çµ±é¡¯ç¤ºä»¥ä¸‹æ ¸å¿ƒè§’è‰²é¸é …ï¼š
  | è§’è‰²é¡å‹ | è§£è®€é¢¨æ ¼ | ç‰¹è‰²æè¿° | èªèª¿ç‰¹å¾µ |
  | Pip-Boyæ•¸æ“šåˆ†ææ³• | ç³»çµ±åŒ–åˆ†æ | ç¶ è‰²å–®è‰²è¢å¹•é¢¨æ ¼ï¼Œæƒæå¡ç‰ŒåŸºæœ¬æ•¸æ“š | æ©Ÿæ¢°å¼ã€ç§‘å­¸åŒ–ã€æ•¸æ“šå°å‘ |
  | é¿é›£æ‰€å±…æ°‘è¦–è§’æ³• | å¤©çœŸæ¨‚è§€ | æˆ°å‰å¸¸è­˜ç†è§£æˆ°å¾Œæƒ…æ³ï¼Œä¸ç•¶æ¨‚è§€ | å–®ç´”ã€å¥½å¥‡ã€èª¤è§£ç¾å¯¦ |
  | å»¢åœŸå•†äººæ™ºæ…§æ³• | ç²¾æ˜å¯¦ç”¨ | è³‡æºåƒ¹å€¼è©•ä¼°ï¼Œé¢¨éšªæ”¶ç›Šåˆ†æ | ç‹¡çŒ¾ã€å¯é ã€å•†æ¥­å°å‘ |
  | è¶…ç´šè®Šç¨®äººç°¡åŒ–æ³• | ç›´æ¥ç²—æš´ | èªè¨€ç°¡å–®ä½†é‚è¼¯æ¸…æ™°ï¼Œæ„å¤–ç²¾æº– | ç²—ç³™ã€ç›´æ¥ã€æ™ºæ…§è—æ‹™ |
And æ´¾ç³»å°ˆå±¬è§£è®€é¢¨æ ¼ï¼š
  | æ´¾ç³»è§’è‰² | è§£è®€å‚¾å‘ | ç‰¹æ®ŠåŠŸèƒ½ |
  | å…„å¼Ÿæœƒé•·è€ | ç§‘æŠ€å°å‘ç†æ€§åˆ†æ | å¼•ç”¨æŠ€è¡“æ‰‹å†Šå’Œå‚³çµ±æ•™èª¨ |
  | NCR å…±å’Œåœ‹ä»£è¡¨ | æ°‘ä¸»æŠ•ç¥¨å¼å¤šè§’åº¦ | å¹³è¡¡å„æ–¹åˆ©ç›Šçš„å»ºè­° |
  | å‡±æ’’è»åœ˜æ™ºè€… | å°ˆåˆ¶ä½†é«˜æ•ˆæ±ºç­– | å¼·èª¿ç´€å¾‹å’Œæ•ˆç‡ |
  | æ å¥ªè€…é ­ç›® | æ··äº‚å‰µæ„è§£æ±ºæ–¹æ¡ˆ | éå‚³çµ±ä½†æœ‰æ•ˆçš„å»ºè­° |
And å¤¥ä¼´è¦‹è§£ç³»çµ±ï¼š
  | å¤¥ä¼´è§’è‰² | è§£è®€ç‰¹è‰² | å€‹æ€§åŒ–å›æ‡‰ |
  | Dogmeat | å¿ èª å¯é çš„ç°¡å–®å»ºè­° | ç”¨è‚¢é«”èªè¨€å’Œè¡Œç‚ºè¡¨é” |
  | Nick Valentine | åµæ¢å¼é‚è¼¯æ¨ç† | çµåˆæ¡ˆä¾‹åˆ†æè§£è®€ |
  | Piper | è¨˜è€…å¼æ·±åº¦åˆ†æ | è¿½æ ¹ç©¶åº•çš„èª¿æŸ¥è¦–è§’ |
  | Codsworth | è‹±å¼ç®¡å®¶ç¦®è²Œå»ºè­° | æ­£å¼ä½†é—œæ‡·çš„èªèª¿ |
  | Strong | è¶…ç´šè®Šç¨®äººç›´ç‡è§€é» | ç°¡åŒ–ä½†æ·±åˆ»çš„äººç”Ÿå“²ç† |
And æ¯å€‹è§’è‰²åŒ…å«ç¨ç‰¹çš„èªèª¿ã€ç”¨è©é¢¨æ ¼å’Œ Fallout å¹½é»˜å…ƒç´ 
And è§’è‰²é¸æ“‡å½±éŸ¿è§£è®€çš„è©å½™ã€èªèª¿å’Œå»ºè­°æ–¹å‘
```

#### 3.2 Karma ç³»çµ±å½±éŸ¿è§£è®€ (CHARACTER-002)
**åŠŸèƒ½æè¿°**: å±…æ°‘çš„ Karma å‚¾å‘å½±éŸ¿è§’è‰²è§£è®€çš„èªèª¿å’Œå»ºè­°æ–¹å‘

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå±…æ°‘å…·æœ‰ç‰¹å®š Karma ç­‰ç´š
When ç³»çµ±ç”Ÿæˆè§’è‰²è§£è®€
Then Good Karma å±…æ°‘ç²å¾—æ­£é¢ç©æ¥µçš„è§£è®€å‚¾å‘
And Neutral Karma å±…æ°‘ç²å¾—å¹³è¡¡å®¢è§€çš„åˆ†æ
And Evil Karma å±…æ°‘ç²å¾—ç¾å¯¦ä¸»ç¾©çš„åš´é…·è§£è®€
And è§£è®€å…§å®¹è‡ªå‹•èª¿æ•´æ¨‚è§€åº¦å’Œå¯¦ç”¨æ€§å»ºè­°
And ç³»çµ±æ ¹æ“šå±…æ°‘é¸æ“‡å‹•æ…‹èª¿æ•´ Karma å‚¾å‘
```

#### 3.3 å»¢åœŸå•é¡Œè™•ç†å¼•æ“ (QUESTION-001)
**åŠŸèƒ½æè¿°**: ç³»çµ±æ ¹æ“šå»¢åœŸå•é¡Œé¡åˆ¥æä¾›å°ˆé–€çš„è§£è®€æ¶æ§‹å’Œå»ºè­°æ¨¡æ¿

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå±…æ°‘è¼¸å…¥å åœå•é¡Œ
When ç³»çµ±åˆ†æå•é¡Œå…§å®¹
Then ç³»çµ±è‡ªå‹•åˆ†é¡ç‚ºä»¥ä¸‹å»¢åœŸå•é¡Œé¡åˆ¥ï¼š
  | å•é¡Œé¡åˆ¥ | è‹±æ–‡é¡åˆ¥ | å…¸å‹å•é¡Œç¯„ä¾‹ | è§£è®€é‡é» |
  | ç”Ÿå­˜æ±ºç­– | Survival Decisions | æˆ‘æ‡‰è©²æ¢ç´¢é€™å€‹å»¢å¢Ÿå—ï¼Ÿ | é¢¨éšªè©•ä¼°ã€è³‡æºéœ€æ±‚ |
  | è³‡æºç®¡ç† | Resource Management | æˆ‘çš„èšè½éœ€è¦ä»€éº¼è³‡æºï¼Ÿ | å„ªå…ˆé †åºã€äº¤æ˜“ç­–ç•¥ |
  | äººéš›é—œä¿‚ | Wasteland Relationships | é€™å€‹å•†äººå€¼å¾—ä¿¡ä»»å—ï¼Ÿ | ä¿¡ä»»è©•ä¼°ã€åˆä½œæ©Ÿæœƒ |
  | æ¢ç´¢å†’éšª | Exploration Adventures | å‰å¾€æ–°åœ°å€çš„æ™‚æ©Ÿå°å—ï¼Ÿ | æº–å‚™ç¨‹åº¦ã€å±éšªæŒ‡æ•¸ |
  | é‡å»ºè¦åŠƒ | Rebuilding Plans | å¦‚ä½•é‡å»ºé€™ç‰‡å»¢åœŸï¼Ÿ | é•·æœŸè¦åŠƒã€ç¤¾ç¾¤å»ºè¨­ |
And ç³»çµ±æä¾›å•é¡Œæ¨¡æ¿ï¼š
  | æ¨¡æ¿é¡å‹ | æ¨¡æ¿å…§å®¹ | é©ç”¨è§’è‰² |
  | é¿é›£æ‰€å±…æ°‘ | "æ ¹æ“šé¿é›£æ‰€ç”Ÿå­˜æ‰‹å†Š..." | Vault Dweller |
  | å»¢åœŸæ™ºæ…§ | "å»¢åœŸæ™ºæ…§å‘Šè¨´æˆ‘å€‘..." | Wasteland Trader |
  | Pip-Boyåˆ†æ | "Pip-Boyå»ºè­°..." | Tech Specialist |
  | ç§‘æŠ€åˆ†æ | "é¿é›£æ‰€ç§‘æŠ€åˆ†æé¡¯ç¤º..." | Brotherhood Elder |
And æ ¹æ“šå•é¡Œé¡åˆ¥èª¿æ•´å¡ç‰Œæ¬Šé‡å’Œè§£è®€ç„¦é»
```

#### 3.4 ç‰¹æ®Šå»¢åœŸäº‹ä»¶ç³»çµ± (SPECIAL-EVENTS-001)
**åŠŸèƒ½æè¿°**: ç³»çµ±æ”¯æ´ç‰¹æ®Šå»¢åœŸäº‹ä»¶æœŸé–“çš„ä¸»é¡Œè§£è®€

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸç™¼ç”Ÿç‰¹æ®Šäº‹ä»¶
When å±…æ°‘é€²è¡Œå åœ
Then ç³»çµ±æ ¹æ“šäº‹ä»¶é¡å‹èª¿æ•´è§£è®€é¢¨æ ¼ï¼š
  | äº‹ä»¶é¡å‹ | è§£è®€èª¿æ•´ | ç‰¹æ®Šæ•ˆæœ | éŸ³æ•ˆè®ŠåŒ– |
  | è¼»å°„é¢¨æš´è§£è®€ | å¼·èª¿ä¿è­·å’Œé¿éšª | ç´…è‰²è­¦ç¤ºç•Œé¢ | è“‹é©è¨ˆæ•¸å™¨å¿«é€ŸéŸ¿æ‡‰ |
  | æˆ°å‰ç¯€æ—¥ä¸»é¡Œ | æ‡·èˆŠæ¨‚è§€è§£è®€ | å¾©å¤è‰²èª¿æ¿¾é¡ | æˆ°å‰éŸ³æ¨‚å…ƒç´  |
  | æ´¾ç³»è¡çªæœŸé–“ | æˆ°ç•¥åˆ†æå°å‘ | è»ç”¨ç•Œé¢é¢¨æ ¼ | æˆ°è¡“é€šè¨ŠéŸ³æ•ˆ |
  | æ–°èšè½å»ºè¨­ | å»ºè¨­è¦åŠƒæŒ‡å° | å»ºç¯‰è—åœ–èƒŒæ™¯ | å»ºè¨­å·¥å…·éŸ³æ•ˆ |
And äº‹ä»¶æœŸé–“é¡¯ç¤ºç›¸é—œçš„å»¢åœŸèƒŒæ™¯è³‡è¨Š
And è§£è®€å…§å®¹åŒ…å«äº‹ä»¶ç›¸é—œçš„ç”Ÿå­˜å»ºè­°
And ç‰¹æ®Šäº‹ä»¶å½±éŸ¿å¡ç‰Œå‡ºç¾æ©Ÿç‡
```

### 4. å»¢åœŸå åœè¨˜éŒ„æ¨¡çµ„ (Wasteland Reading Archive)

#### 4.1 Holotape è¨˜éŒ„ä¿å­˜ (ARCHIVE-001)
**åŠŸèƒ½æè¿°**: ä»¥ Holotape é¢¨æ ¼ä¿å­˜å»¢åœŸå±…æ°‘çš„å åœè¨˜éŒ„

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå±…æ°‘å®Œæˆä¸€æ¬¡å åœ
When é¸æ“‡ä¿å­˜åˆ°å€‹äºº Holotape æª”æ¡ˆ
Then ç³»çµ±ä»¥ Holotape æ ¼å¼ä¿å­˜å®Œæ•´å åœè³‡æ–™
And åŒ…å«å•é¡Œé¡åˆ¥ï¼ˆç”Ÿå­˜æ±ºç­–ã€è³‡æºç®¡ç†ã€äººéš›é—œä¿‚ã€æ¢ç´¢å†’éšªã€é‡å»ºè¦åŠƒï¼‰
And åŒ…å«ä½¿ç”¨çš„å»¢åœŸç‰Œé™£é¡å‹å’Œå¡ç‰Œçµ„åˆ
And åŒ…å«è§’è‰²è§£è®€è²éŸ³å’Œ Karma å½±éŸ¿
And åŒ…å«å»¢åœŸä¸»é¡Œçš„è§£è®€å…§å®¹å’Œå»ºè­°
And å±…æ°‘å¯ä»¥åœ¨çµ‚ç«¯æª”æ¡ˆç³»çµ±ä¸­æŸ¥çœ‹å’Œå›æ”¾
```

#### 4.2 å»¢åœŸæª”æ¡ˆæª¢ç´¢ (ARCHIVE-002)
**åŠŸèƒ½æè¿°**: å»¢åœŸå±…æ°‘å¯ä»¥é€éçµ‚ç«¯ä»‹é¢æœå°‹å’Œç¯©é¸æ­·å²å åœè¨˜éŒ„

**é©—æ”¶æ¢ä»¶**:
```gherkin
Given å»¢åœŸå±…æ°‘æœ‰å¤šç­† Holotape è¨˜éŒ„
When å±…æ°‘åœ¨çµ‚ç«¯æª”æ¡ˆç³»çµ±ä¸­é€²è¡Œæœå°‹
Then å¯ä»¥æŒ‰å»¢åœŸæ™‚é–“ç¯„åœç¯©é¸ï¼ˆæˆ°å‰ã€æˆ°å¾Œå¹´æ•¸ï¼‰
And å¯ä»¥æŒ‰å•é¡Œé¡åˆ¥ç¯©é¸ï¼ˆç”Ÿå­˜ã€è³‡æºã€é—œä¿‚ã€æ¢ç´¢ã€é‡å»ºï¼‰
And å¯ä»¥æŒ‰ä½¿ç”¨çš„è§’è‰²è²éŸ³ç¯©é¸
And å¯ä»¥æŒ‰ Karma ç­‰ç´šè®ŠåŒ–ç¯©é¸
And å¯ä»¥æŒ‰å¡ç‰ŒèŠ±è‰²ç¯©é¸ï¼ˆå¯æ¨‚ç“¶ã€æ­¦å™¨ã€ç“¶è“‹ã€è¼»å°„æ£’ï¼‰
And æ”¯æ´ Pip-Boy é¢¨æ ¼çš„åˆ†é è¼‰å…¥å‹•ç•«
And é¡¯ç¤ºè¼»å°„è­¦å‘Šç¬¦è™Ÿæ¨™ç¤ºé‡è¦ä¿¡æ¯
```

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹è¦æ ¼

### å‰ç«¯æ¶æ§‹ (Frontend)

#### çµ„ä»¶å±¤ç´šçµæ§‹
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/              # shadcn/ui åŸºç¤çµ„ä»¶
â”‚   â”œâ”€â”€ tarot/           # å¡”ç¾…ç‰Œç›¸é—œçµ„ä»¶
â”‚   â”œâ”€â”€ forms/           # è¡¨å–®çµ„ä»¶
â”‚   â””â”€â”€ layout/          # ç‰ˆé¢çµ„ä»¶
â”œâ”€â”€ pages/               # Next.js é é¢
â”œâ”€â”€ hooks/               # è‡ªå®šç¾© hooks
â”œâ”€â”€ stores/              # Zustand ç‹€æ…‹ç®¡ç†
â”œâ”€â”€ services/            # API æœå‹™
â””â”€â”€ utils/               # å·¥å…·å‡½æ•¸
```

#### ç‹€æ…‹ç®¡ç†è¦æ ¼
```typescript
// å…¨åŸŸç‹€æ…‹çµæ§‹
interface AppState {
  user: UserState | null;
  currentReading: ReadingState | null;
  ui: UIState;
}

// ç”¨æˆ¶ç‹€æ…‹
interface UserState {
  id: string;
  email: string;
  profile: UserProfile;
  preferences: UserPreferences;
}

// å åœç‹€æ…‹
interface ReadingState {
  id: string;
  question: string;
  cards: TarotCard[];
  interpretation: string;
  createdAt: Date;
}
```

### å¾Œç«¯æ¶æ§‹ (Backend)

#### API ç«¯é»è¦æ ¼
```python
# ç”¨æˆ¶ç›¸é—œç«¯é»
POST /auth/register        # ç”¨æˆ¶è¨»å†Š
POST /auth/login          # ç”¨æˆ¶ç™»å…¥
POST /auth/refresh        # åˆ·æ–° token
GET  /auth/me             # ç²å–ç”¨æˆ¶è³‡è¨Š

# å¡”ç¾…ç‰Œç›¸é—œç«¯é»
GET  /tarot/cards         # ç²å–æ‰€æœ‰å¡”ç¾…ç‰Œ
POST /tarot/reading       # å‰µå»ºæ–°å åœ
GET  /tarot/reading/{id}  # ç²å–å åœè©³æƒ…

# æ­·å²è¨˜éŒ„ç«¯é»
GET  /history             # ç²å–ç”¨æˆ¶æ­·å²
POST /history/{id}/note   # æ·»åŠ å€‹äººç­†è¨˜
DELETE /history/{id}      # åˆªé™¤è¨˜éŒ„
```

#### è³‡æ–™åº« Schema
```sql
-- ç”¨æˆ¶è¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    is_verified BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- å¡”ç¾…ç‰Œè¡¨
CREATE TABLE tarot_cards (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    suit VARCHAR(50),
    number INTEGER,
    meaning_upright TEXT,
    meaning_reversed TEXT,
    image_url VARCHAR(500),
    keywords TEXT[]
);

-- å åœè¨˜éŒ„è¡¨
CREATE TABLE readings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id INTEGER REFERENCES users(id),
    question TEXT,
    cards_data JSONB,
    interpretation TEXT,
    ai_model VARCHAR(50),
    created_at TIMESTAMP DEFAULT NOW()
);
```

## ğŸ§ª æ¸¬è©¦ç­–ç•¥

### å‰ç«¯æ¸¬è©¦

#### 1. å–®å…ƒæ¸¬è©¦ (Jest + Testing Library)
```typescript
// çµ„ä»¶æ¸¬è©¦ç¯„ä¾‹
describe('TarotCard Component', () => {
  it('æ‡‰è©²æ­£ç¢ºé¡¯ç¤ºå¡”ç¾…ç‰Œè³‡è¨Š', () => {
    const card = mockTarotCard;
    render(<TarotCard card={card} />);

    expect(screen.getByText(card.name)).toBeInTheDocument();
    expect(screen.getByAltText(`${card.name} å¡”ç¾…ç‰Œ`)).toBeInTheDocument();
  });

  it('æ‡‰è©²è™•ç†ç¿»ç‰Œå‹•ç•«', async () => {
    const card = mockTarotCard;
    render(<TarotCard card={card} isFlipping />);

    const cardElement = screen.getByTestId('tarot-card');
    expect(cardElement).toHaveClass('flipping');

    await waitFor(() => {
      expect(cardElement).not.toHaveClass('flipping');
    });
  });
});
```

#### 2. æ•´åˆæ¸¬è©¦ (API æ•´åˆ)
```typescript
// API æ•´åˆæ¸¬è©¦
describe('Reading API Integration', () => {
  it('æ‡‰è©²æˆåŠŸå‰µå»ºæ–°å åœ', async () => {
    const mockReading = {
      question: 'æˆ‘çš„æ„›æƒ…é‹å‹¢å¦‚ä½•ï¼Ÿ',
      spreadType: 'three-card'
    };

    const response = await createReading(mockReading);

    expect(response.data).toHaveProperty('id');
    expect(response.data.question).toBe(mockReading.question);
    expect(response.data.cards).toHaveLength(3);
  });
});
```

#### 3. E2E æ¸¬è©¦ (Playwright)
```typescript
// ç«¯åˆ°ç«¯æ¸¬è©¦
test('å®Œæ•´å åœæµç¨‹', async ({ page }) => {
  // ç™»å…¥
  await page.goto('/login');
  await page.fill('[data-testid=email]', 'test@example.com');
  await page.fill('[data-testid=password]', 'password123');
  await page.click('[data-testid=login-button]');

  // é–‹å§‹å åœ
  await page.click('[data-testid=start-reading]');
  await page.fill('[data-testid=question]', 'æˆ‘çš„äº‹æ¥­ç™¼å±•å¦‚ä½•ï¼Ÿ');
  await page.click('[data-testid=submit-question]');

  // æŠ½ç‰Œ
  await page.click('[data-testid=draw-cards]');
  await page.waitForSelector('[data-testid=card-result]');

  // é©—è­‰çµæœ
  const interpretation = await page.textContent('[data-testid=interpretation]');
  expect(interpretation).toContain('äº‹æ¥­');
});
```

### å¾Œç«¯æ¸¬è©¦

#### 1. å–®å…ƒæ¸¬è©¦ (pytest)
```python
# æ¥­å‹™é‚è¼¯æ¸¬è©¦
def test_draw_random_cards():
    """æ¸¬è©¦éš¨æ©ŸæŠ½ç‰Œé‚è¼¯"""
    cards = draw_random_cards(count=3)

    assert len(cards) == 3
    assert len(set(card.id for card in cards)) == 3  # ç„¡é‡è¤‡
    assert all(card.position in ['upright', 'reversed'] for card in cards)

def test_generate_interpretation():
    """æ¸¬è©¦è§£è®€ç”Ÿæˆ"""
    cards = [mock_card_1, mock_card_2, mock_card_3]
    question = "æˆ‘çš„æ„›æƒ…é‹å‹¢å¦‚ä½•ï¼Ÿ"

    interpretation = generate_interpretation(cards, question)

    assert len(interpretation) > 100
    assert "æ„›æƒ…" in interpretation
```

#### 2. API æ¸¬è©¦ (FastAPI TestClient)
```python
def test_create_reading(client, auth_headers):
    """æ¸¬è©¦å‰µå»ºå åœ API"""
    reading_data = {
        "question": "æˆ‘çš„äº‹æ¥­ç™¼å±•å¦‚ä½•ï¼Ÿ",
        "spread_type": "three_card"
    }

    response = client.post(
        "/tarot/reading",
        json=reading_data,
        headers=auth_headers
    )

    assert response.status_code == 201
    data = response.json()
    assert data["question"] == reading_data["question"]
    assert len(data["cards"]) == 3
    assert "interpretation" in data
```

#### 3. æ•´åˆæ¸¬è©¦ (è³‡æ–™åº« + å¤–éƒ¨æœå‹™)
```python
def test_reading_with_ai_integration(client, db_session):
    """æ¸¬è©¦åŒ…å« AI è§£è®€çš„å®Œæ•´æµç¨‹"""
    user = create_test_user(db_session)

    with patch('services.ai_service.generate_interpretation') as mock_ai:
        mock_ai.return_value = "é€™æ˜¯ä¸€å€‹æ¸¬è©¦è§£è®€"

        response = client.post(
            "/tarot/reading",
            json={"question": "æ¸¬è©¦å•é¡Œ", "spread_type": "single"},
            headers=auth_headers_for_user(user)
        )

        assert response.status_code == 201
        assert mock_ai.called

        # é©—è­‰è³‡æ–™åº«è¨˜éŒ„
        reading = db_session.query(Reading).filter_by(user_id=user.id).first()
        assert reading is not None
        assert reading.interpretation == "é€™æ˜¯ä¸€å€‹æ¸¬è©¦è§£è®€"
```

## ğŸ“ˆ é–‹ç™¼é‡Œç¨‹ç¢‘

### ç¬¬ä¸€éšæ®µï¼šåŸºç¤æ¶æ§‹ (é€± 1-2)
- [ ] å°ˆæ¡ˆåˆå§‹åŒ–å’Œç’°å¢ƒè¨­å®š
- [ ] è³‡æ–™åº« Schema å»ºç«‹
- [ ] åŸºç¤èªè­‰ç³»çµ±
- [ ] è¨­è¨ˆç³»çµ±çµ„ä»¶åº«

### ç¬¬äºŒéšæ®µï¼šæ ¸å¿ƒåŠŸèƒ½ (é€± 3-5)
- [ ] ç”¨æˆ¶è¨»å†Š/ç™»å…¥æµç¨‹
- [ ] å¡”ç¾…ç‰Œè³‡æ–™ç®¡ç†
- [ ] åŸºç¤æŠ½ç‰ŒåŠŸèƒ½
- [ ] AI è§£è®€æ•´åˆ

### ç¬¬ä¸‰éšæ®µï¼šä½¿ç”¨è€…é«”é©— (é€± 6-8)
- [ ] æŠ½ç‰Œå‹•ç•«å’Œäº’å‹•
- [ ] å åœæ­·å²ç®¡ç†
- [ ] éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] æ•ˆèƒ½æœ€ä½³åŒ–

### ç¬¬å››éšæ®µï¼šé€²éšåŠŸèƒ½ (é€± 9-12)
- [ ] ç¤¾ç¾¤åˆ†äº«åŠŸèƒ½
- [ ] å€‹äººåŒ–æ¨è–¦
- [ ] é€²éšç‰Œé™£
- [ ] ç›£æ§å’Œåˆ†æ

## ğŸ¯ å“è³ªä¿è­‰

### æ¸¬è©¦è¦†è“‹ç‡ç›®æ¨™
- å–®å…ƒæ¸¬è©¦: â‰¥ 90%
- æ•´åˆæ¸¬è©¦: â‰¥ 80%
- E2E æ¸¬è©¦: æ¶µè“‹æ‰€æœ‰é—œéµæµç¨‹

### æ•ˆèƒ½æŒ‡æ¨™
- é¦–é è¼‰å…¥æ™‚é–“: < 2ç§’
- API å›æ‡‰æ™‚é–“: < 500ms
- æŠ½ç‰Œå‹•ç•«: 60fps
- éŒ¯èª¤ç‡: < 1%

### ç¨‹å¼ç¢¼å“è³ª
- TypeScript åš´æ ¼æ¨¡å¼
- ESLint + Prettier æ ¼å¼åŒ–
- ç¨‹å¼ç¢¼å¯©æŸ¥å¿…é ˆ
- è‡ªå‹•åŒ–éƒ¨ç½²æª¢æŸ¥

---

*æ­¤è¦æ ¼æ–‡ä»¶å°‡éš¨é–‹ç™¼é€²å±•æŒçºŒæ›´æ–°å’Œç´°åŒ–*