# Chirp 3:HD TTS å®Œæ•´åŠŸèƒ½æ¸¬è©¦é é¢

## ç°¡ä»‹

é€™æ˜¯ä¸€å€‹å…¨é¢çš„æ¸¬è©¦é é¢ï¼Œç”¨æ–¼é©—è­‰ Google Cloud Text-to-Speech Chirp 3:HD æ¨¡å‹çš„æ‰€æœ‰åŠŸèƒ½ã€‚

## è¨ªå•æ¸¬è©¦é é¢

```
http://localhost:3000/test-chirp3-hd
```

## åŠŸèƒ½ç‰¹æ€§

### 1. è§’è‰²èªéŸ³æ¸¬è©¦
æ¸¬è©¦å…¨éƒ¨ 14 å€‹å»¢åœŸè§’è‰²ï¼Œä¾éŸ³é«˜åˆ†çµ„ï¼š

#### æ¥µä½éŸ³è§’è‰² (3)
- **Super Mutant**: æ¥µä½éŸ³ (-12st, 0.65x) - Algenib
- **Brotherhood Paladin**: ä½æ²‰å¨åš´ (-8st, 0.75x) - Algieba
- **Legion Centurion**: åš´å²å‘½ä»¤ (-10st, 0.7x) - Alnilam

#### ä½éŸ³è§’è‰² (3)
- **Ghoul**: æ²™å•è€æˆ (-6st, 0.8x) - Mizar
- **Wasteland Trader**: æˆç†Ÿå•†äºº (-4st, 0.9x) - Vega
- **NCR Ranger**: å†·éœå°ˆæ¥­ (-5st, 0.85x) - Deneb

#### ä¸­éŸ³è§’è‰² (2)
- **Pip-Boy**: æ¨™æº–å‹å–„ (0st, 1.0x) - Regulus
- **Minuteman**: ç©©é‡å¯é  (-2st, 0.95x) - Altair

#### é«˜éŸ³è§’è‰² (3)
- **Vault Dweller**: å¹´è¼•æ¨‚è§€ (+4st, 1.1x) - Aoede
- **Railroad Agent**: æ©Ÿæ•å¿«é€Ÿ (+3st, 1.15x) - Leda
- **Brotherhood Scribe**: è°æ˜å¥½å­¸ (+5st, 1.05x) - Callisto

#### ç‰¹æ®Šè§’è‰² (3)
- **Codsworth**: æ©Ÿå™¨äºº (+8st, 1.25x) - Fomalhaut
- **Raider**: ç²—é‡å¿«é€Ÿ (-3st, 1.3x) - Hadar
- **Institute Scientist**: çŸ¥è­˜ä»½å­ (+6st, 1.15x) - Kore

### 2. é è¨­æ¸¬è©¦å ´æ™¯

#### å ´æ™¯ 1: åŸºæœ¬èªéŸ³
- **æ–‡å­—**: "Welcome to the wasteland. Your journey begins now."
- **æ¸¬è©¦**: åŸºæœ¬èªéŸ³åˆæˆåŠŸèƒ½
- **åŠŸèƒ½**: ç„¡é¡å¤–åŠŸèƒ½

#### å ´æ™¯ 2: è‡ªè¨‚ç™¼éŸ³
- **æ–‡å­—**: "The Pip-Boy displays your Tarot reading. Visit the NCR Ranger station."
- **æ¸¬è©¦**: IPA åœ‹éš›éŸ³æ¨™è‡ªè¨‚ç™¼éŸ³
- **åŠŸèƒ½**: 
  - Pip-Boy â†’ [pÉªp bÉ”Éª]
  - Tarot â†’ [ËˆtÃ¦.roÊŠ]
  - NCR â†’ [É›n si É‘r]

#### å ´æ™¯ 3: è‡ªè¨‚æš«åœ
- **æ–‡å­—**: "System ready. Loading data. Please wait. Process complete."
- **æ¸¬è©¦**: æš«åœæ§åˆ¶
- **åŠŸèƒ½**:
  - position 13: medium (after "ready")
  - position 27: 500ms (after "data")
  - position 40: long (after "wait")

#### å ´æ™¯ 4: èªéŸ³æ§åˆ¶
- **æ–‡å­—**: "This message is modified with custom pitch and rate."
- **æ¸¬è©¦**: éŸ³é«˜èˆ‡èªé€Ÿè¦†å¯«
- **åŠŸèƒ½**:
  - pitch: +5.0 semitones
  - rate: 1.2x
  - volume: 1.0

#### å ´æ™¯ 5: å®Œæ•´åŠŸèƒ½
- **æ–‡å­—**: "The Pip-Boy system is ready. Your Tarot reading begins. Brotherhood forces detected."
- **æ¸¬è©¦**: æ‰€æœ‰åŠŸèƒ½çµ„åˆ
- **åŠŸèƒ½**:
  - è‡ªè¨‚ç™¼éŸ³ (Pip-Boy, Tarot, Brotherhood)
  - æš«åœ (position 26: short, position 52: medium)
  - èªéŸ³æ§åˆ¶ (pitch: +2.0st, rate: 1.1x)

### 3. è‡ªè¨‚åƒæ•¸æ¸¬è©¦

#### å¯èª¿æ•´åƒæ•¸
- **éŸ³é«˜ (Pitch)**: -20 åˆ° +20 semitones
- **èªé€Ÿ (Rate)**: 0.25x åˆ° 4.0x
- **éŸ³é‡ (Volume)**: 0% åˆ° 100%
- **è‡ªè¨‚æ–‡å­—**: æœ€å¤š 1000 å­—å…ƒ

## æ¸¬è©¦æµç¨‹

### å¿«é€Ÿæ¸¬è©¦
1. è¨ªå• `http://localhost:3000/test-chirp3-hd`
2. é¸æ“‡ä¸€å€‹è§’è‰²ï¼ˆé è¨­ï¼šVault Dwellerï¼‰
3. é¸æ“‡ä¸€å€‹æ¸¬è©¦å ´æ™¯ï¼ˆé è¨­ï¼šåŸºæœ¬èªéŸ³ï¼‰
4. é»æ“Šã€ŒåŸ·è¡Œæ¸¬è©¦ã€æŒ‰éˆ•
5. è½å–ç”Ÿæˆçš„éŸ³æª”

### å®Œæ•´æ¸¬è©¦
1. é»æ“Šã€ŒåŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ã€è‡ªå‹•æ¸¬è©¦æ‰€æœ‰å ´æ™¯
2. æŸ¥çœ‹æ¸¬è©¦çµæœç¸½è¦½
3. æª¢æŸ¥æ¯å€‹æ¸¬è©¦çš„ç‹€æ…‹ï¼ˆæˆåŠŸ/å¤±æ•—ï¼‰
4. æŸ¥çœ‹éŸ³æª”è³‡è¨Šï¼ˆæ™‚é•·ã€å¤§å°ã€æ¨¡å‹ï¼‰

### è‡ªè¨‚æ¸¬è©¦
1. è¼¸å…¥è‡ªè¨‚æ–‡å­—
2. é»æ“Šã€Œé¡¯ç¤ºé€²éšé¸é …ã€
3. èª¿æ•´éŸ³é«˜ã€èªé€Ÿã€éŸ³é‡æ»‘æ¡¿
4. é»æ“Šã€ŒåŸ·è¡Œè‡ªè¨‚æ¸¬è©¦ã€
5. è½å–çµæœ

## API è«‹æ±‚æ ¼å¼

æ¸¬è©¦é é¢æœƒç™¼é€ä»¥ä¸‹æ ¼å¼çš„è«‹æ±‚åˆ°å¾Œç«¯ï¼š

```json
{
  "text": "æ¸¬è©¦æ–‡å­—",
  "character_key": "vault_dweller",
  "audio_type": "story",
  "cache_enabled": false,
  "return_format": "url",
  "custom_pronunciations": [
    {
      "phrase": "Pip-Boy",
      "pronunciation": "pÉªp bÉ”Éª",
      "phonetic_encoding": "PHONETIC_ENCODING_IPA"
    }
  ],
  "voice_controls": {
    "pitch": 5.0,
    "rate": 1.2,
    "volume": 1.0,
    "pauses": [
      {
        "position": 13,
        "duration": "medium"
      }
    ]
  }
}
```

## æ¸¬è©¦çµæœè³‡è¨Š

æ¯å€‹æ¸¬è©¦æœƒé¡¯ç¤ºä»¥ä¸‹è³‡è¨Šï¼š

### æˆåŠŸæ™‚
- âœ“ æ¸¬è©¦æˆåŠŸ
- æ™‚é•· (ç§’)
- æª”æ¡ˆå¤§å° (KB)
- æ¨¡å‹ (chirp3-hd)
- æ¡æ¨£ç‡ (24000 Hz)
- ğŸ”Š æ’­æ”¾æŒ‰éˆ•

### å¤±æ•—æ™‚
- âœ— æ¸¬è©¦å¤±æ•—
- éŒ¯èª¤è¨Šæ¯

## é©—è­‰é‡é»

### 1. éŸ³é«˜èª¿æ•´
- [ ] æ¥µä½éŸ³è§’è‰² (Super Mutant) è½èµ·ä¾†æ˜é¡¯ä½æ²‰
- [ ] æ¥µé«˜éŸ³è§’è‰² (Pip-Boy) è½èµ·ä¾†æ©Ÿæ¢°åŒ–
- [ ] æ¨™æº–éŸ³ (Vault Dweller) éŸ³é«˜æ­£å¸¸

### 2. èªé€Ÿæ§åˆ¶
- [ ] æ…¢é€Ÿ (Super Mutant 0.65x) æ˜é¡¯ç·©æ…¢
- [ ] å¿«é€Ÿ (Pip-Boy 1.3x) æ˜é¡¯åŠ é€Ÿ
- [ ] æ¨™æº–é€Ÿåº¦ (Vault Dweller 1.0x) è‡ªç„¶

### 3. è‡ªè¨‚ç™¼éŸ³
- [ ] "Pip-Boy" ç™¼éŸ³æ­£ç¢º [pÉªp bÉ”Éª]
- [ ] "Tarot" ç™¼éŸ³æ­£ç¢º [ËˆtÃ¦.roÊŠ]
- [ ] "NCR" ç™¼éŸ³æ­£ç¢º [É›n si É‘r]

### 4. æš«åœæ§åˆ¶
- [ ] short æš«åœæ˜é¡¯ä½†çŸ­æš«
- [ ] medium æš«åœé©ä¸­
- [ ] long æš«åœæ˜é¡¯è¼ƒé•·
- [ ] 500ms æš«åœç¬¦åˆé æœŸ

### 5. å®Œæ•´åŠŸèƒ½çµ„åˆ
- [ ] æ‰€æœ‰åŠŸèƒ½åŒæ™‚é‹ä½œç„¡è¡çª
- [ ] éŸ³è³ªä¿æŒ HD å“è³ª (24kHz)
- [ ] ç„¡é›œéŸ³æˆ–å¤±çœŸ

## å¸¸è¦‹å•é¡Œ

### Q1: æ¸¬è©¦å¤±æ•—æ€éº¼è¾¦ï¼Ÿ
**A**: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
1. Backend server æ˜¯å¦é‹è¡Œ (`python -m app.main`)
2. `.env` ä¸­ `CHIRP3_ENABLED=true`
3. Google Cloud credentials æ˜¯å¦æœ‰æ•ˆ
4. æŸ¥çœ‹ backend æ—¥èªŒéŒ¯èª¤è¨Šæ¯

### Q2: è½ä¸å‡ºéŸ³é«˜/èªé€Ÿå·®ç•°ï¼Ÿ
**A**: 
1. å˜—è©¦æ›´æ¥µç«¯çš„åƒæ•¸ï¼ˆå¦‚ -20st æˆ– +20stï¼‰
2. å°æ¯”ä¸åŒè§’è‰²çš„èªéŸ³
3. ä½¿ç”¨ã€ŒåŸ·è¡Œæ‰€æœ‰æ¸¬è©¦ã€åŠŸèƒ½å°æ¯”

### Q3: è‡ªè¨‚ç™¼éŸ³æ²’æœ‰æ•ˆæœï¼Ÿ
**A**:
1. ç¢ºèª IPA éŸ³æ¨™æ ¼å¼æ­£ç¢º
2. æª¢æŸ¥è©å½™æ‹¼å¯«æ˜¯å¦å®Œå…¨åŒ¹é…
3. æŸ¥çœ‹ backend æ—¥èªŒç¢ºèªæ˜¯å¦æ‡‰ç”¨

### Q4: éŸ³æª”æ’­æ”¾å¤±æ•—ï¼Ÿ
**A**:
1. æª¢æŸ¥ç€è¦½å™¨ console éŒ¯èª¤è¨Šæ¯
2. ç¢ºèª audio URL å¯è¨ªå•
3. æª¢æŸ¥ Supabase Storage æ¬Šé™

## é–‹ç™¼è€…è³‡è¨Š

### ç›¸é—œæª”æ¡ˆ
- **æ¸¬è©¦é é¢**: `src/app/test-chirp3-hd/page.tsx`
- **TTS Service**: `backend/app/services/tts_service.py`
- **API Endpoint**: `backend/app/api/v1/endpoints/audio.py`
- **é…ç½®**: `backend/.env`

### æ—¥èªŒä½ç½®
```bash
# Backend æ—¥èªŒ
backend/logs/

# æŸ¥çœ‹å³æ™‚æ—¥èªŒ
tail -f backend/logs/app.log
```

### é‡è¦ Log æ¨™ç±¤
- `[Chirp3HD Test]` - å‰ç«¯æ¸¬è©¦æ—¥èªŒ
- `[TTSService]` - TTS æœå‹™æ—¥èªŒ
- `[VoiceModelRouter]` - æ¨¡å‹è·¯ç”±æ—¥èªŒ

## æ¸¬è©¦æ¸…å–®

### åŸºæœ¬åŠŸèƒ½
- [ ] é é¢æ­£å¸¸è¼‰å…¥
- [ ] å¯é¸æ“‡è§’è‰²
- [ ] å¯é¸æ“‡æ¸¬è©¦å ´æ™¯
- [ ] å¯åŸ·è¡Œå–®ä¸€æ¸¬è©¦
- [ ] å¯åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
- [ ] éŸ³æª”å¯æ­£å¸¸æ’­æ”¾

### é€²éšåŠŸèƒ½
- [ ] è‡ªè¨‚æ–‡å­—æ¸¬è©¦
- [ ] é€²éšåƒæ•¸èª¿æ•´
- [ ] éŸ³é«˜æ»‘æ¡¿æ§åˆ¶
- [ ] èªé€Ÿæ»‘æ¡¿æ§åˆ¶
- [ ] éŸ³é‡æ»‘æ¡¿æ§åˆ¶

### çµæœé©—è­‰
- [ ] æ¸¬è©¦çµæœæ­£ç¢ºé¡¯ç¤º
- [ ] æˆåŠŸ/å¤±æ•—ç‹€æ…‹æ­£ç¢º
- [ ] éŸ³æª”è³‡è¨Šå®Œæ•´
- [ ] éŒ¯èª¤è¨Šæ¯æ¸…æ¥š
- [ ] å¯é‡è¤‡æ’­æ”¾éŸ³æª”

## æ•ˆèƒ½æŒ‡æ¨™

### é æœŸæŒ‡æ¨™
- **åˆæˆæ™‚é–“**: < 5 ç§’
- **éŸ³æª”å¤§å°**: 10-50 KB (å–æ±ºæ–¼æ–‡å­—é•·åº¦)
- **æ¡æ¨£ç‡**: 24000 Hz
- **ç·¨ç¢¼æ ¼å¼**: MP3
- **éŸ³è³ª**: HD å“è³ª

### ç•°å¸¸æŒ‡æ¨™
- âš ï¸ åˆæˆæ™‚é–“ > 10 ç§’
- âš ï¸ éŸ³æª”å¤§å°ç•°å¸¸ (< 5 KB æˆ– > 100 KB)
- âš ï¸ æ¡æ¨£ç‡ â‰  24000 Hz
- âš ï¸ éŸ³è³ªå·®æˆ–æœ‰é›œéŸ³

## è²¢ç»æŒ‡å—

å¦‚éœ€æ·»åŠ æ–°çš„æ¸¬è©¦å ´æ™¯ï¼š

1. åœ¨ `TEST_SCENARIOS` é™£åˆ—ä¸­æ·»åŠ æ–°å ´æ™¯
2. å®šç¾©å ´æ™¯å±¬æ€§ï¼š
   ```typescript
   {
     id: 'my-test',
     name: 'æ¸¬è©¦åç¨±',
     text: 'æ¸¬è©¦æ–‡å­—',
     description: 'æ¸¬è©¦æè¿°',
     useCustomPronunciation: true,
     customPronunciations: [...],
     usePauses: true,
     pauses: [...],
     useVoiceControls: true,
     voiceControls: {...},
   }
   ```
3. æ¸¬è©¦ä¸¦é©—è­‰

## ç›¸é—œæ–‡ä»¶

- [Chirp 3:HD é…ç½®æŒ‡å—](../../../backend/CHIRP3_CONFIGURATION.md)
- [Audio System README](../../../AUDIO_SYSTEM_README.md)
- [Google Cloud TTS Docs](https://cloud.google.com/text-to-speech/docs/chirp3)
